<h2>Data source</h2>

<form [formGroup]="form">
  <h3>Season</h3>
  <mat-chip-listbox aria-label="Season" formControlName="season">
    @for (season of seasons; track $index) {
    <mat-chip-option [value]="season">{{ season }}</mat-chip-option>
    }
  </mat-chip-listbox>

  <h3>Day</h3>
  <mat-chip-listbox aria-label="Day type" formControlName="day">
    @for (day of days; track $index) {
    <mat-chip-option [value]="day">{{ day }}</mat-chip-option>
    }
  </mat-chip-listbox>

  <h3>Time slot</h3>
  <mat-chip-listbox aria-label="Time slot" formControlName="hour">
    @for (timeSlot of hours | keyvalue : originalOrder; track $index) {
    <mat-chip-option [value]="timeSlot.key">{{ timeSlot.key }}</mat-chip-option>
    }
  </mat-chip-listbox>

  <h3>Factor</h3>
  {{ form.value.percentageFactor }}%
  <mat-slider max="130" min="90" step="10" discrete="true" showTickMarks="true">
    <input matSliderThumb formControlName="percentageFactor" />
  </mat-slider>

  <h2>Target(s)</h2>
  <mat-chip-listbox
    aria-label="Targets"
    multiple
    formControlName="selectedTargets"
  >
    @for (target of potentialTargets | keyvalue; track $index) {
    <mat-chip-option [value]="target.key">{{ target.value }}</mat-chip-option>
    }
  </mat-chip-listbox>

  <h2>Algorithm(s)</h2>
  <mat-chip-listbox
    aria-label="Algorithms"
    multiple
    formControlName="selectedAlgo"
  >
    @for (algo of algorithmList; track $index) {
    <mat-chip-option [value]="algo">{{ algo }}</mat-chip-option>
    }
  </mat-chip-listbox>
</form>

<button
  mat-flat-button
  color="primary"
  (click)="handleButtonLaunchSimulation()"
  [disabled]="form.invalid"
  disabledInteractive=""
>
  Launch simulation
</button>

@if(showResult$ | async) {
<h2>Algorithm result</h2>
@for (positiveResult of positiveResult$ | async; track $index) {
<p>
  {{ positiveResult.algoName }} detect @for (detectedTarget of
  positiveResult.targetsDetected; track detectedTarget) {<b
    >{{ detectedTarget }} </b
  >}.
</p>
}
<button mat-flat-button color="primary" (click)="handleButtonDetails()">
  See details
</button>
}
